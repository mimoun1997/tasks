<template>
    <v-card class="my-1">
            <v-card-title primary-title class="title grey--text text--darken-1 my-2" v-text="dataTask.name"></v-card-title>
            <v-card-text class="content grey--text text--darken-4 my-2" v-text="dataTask.description"></v-card-text>
            <v-card-text>
              <task-completed-toggle :task="dataTask"></task-completed-toggle>
            </v-card-text>
            <v-card-actions class="hidden-xs">
              <v-layout column justify-center align-start>
                  <v-flex xs12 md12>
                    <v-avatar  size="48px" color="grey lighten-3">
                      <v-icon size="46" color="white darken-4">person</v-icon>
                    </v-avatar>
                  </v-flex>
                    <v-list-tile-content class="align-start grey--text text--darken-4">{{ dataTask.user_name }}</v-list-tile-content>
                    <v-list-tile-content class="align-start grey--text text--darken-4" >Creat {{ dataTask.created_at_human }}</v-list-tile-content>
                    <v-list-tile-content class="align-start grey--text text--darken-1" >Ultima atualitzaci√≥ {{dataTask.updated_at_human}}</v-list-tile-content>
                  </v-flex>
              </v-layout>
              <v-layout column align-end>
                <v-flex xs6>
                  <task-show :users="users" :task="dataTask"></task-show>
                  <task-update :users="users" :task="dataTask" @updated="updateTask" :uri="uri"></task-update>
                  <task-destroy :task="dataTask" @removed="removeTask" :uri="uri"></task-destroy>
                </v-flex>
              </v-layout>
              
            
            </v-card-actions>
    </v-card>
</template>

<script>

import Toggle from "./Toggle"
import TaskDestroy from "./TaskDestroy"
import TaskUpdate from "./TaskUpdate"
import TaskShow from "./TaskShow"
import TasksTags from "./TasksTags"

export default {
    name: "TaskCard",
    components: {
        "toggle": Toggle,
        "task-destroy": TaskDestroy,
        "task-update": TaskUpdate,
        "task-show": TaskShow,
        "tasks-tags": TasksTags
    },
    data() {
        return {
            dataTask: this.task
        }
    },
    props: {
        task: {
            type: Object,
            required: true
        },
        users: {
            type: Array,
            required: true
        },
        uri: {
            type: String,
            required: true
        }
    },
    methods: {
        removeTask(task) {
            this.$emit("removed", task);
        },
        updateTask(task) {
            this.$emit("updated", task);
        }
    }
}
</script>

<style>

</style>
